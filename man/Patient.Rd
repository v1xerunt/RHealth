% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/Dataset_data.R
\name{Patient}
\alias{Patient}
\title{Patient: R6 Class for a Sequence of Events}
\description{
The \code{Patient} class manages all clinical events for a single patient.
It supports efficient event-type partitioning, fast time-range slicing, and flexible multi-condition filtering.
}
\details{
\itemize{
\item Data is held as a data.frame.
\item Events can be retrieved as either raw data frames or Event object lists.
}
}
\section{Public fields}{
\if{html}{\out{<div class="r6-fields">}}
\describe{
\item{\code{patient_id}}{Character. Unique identifier for the patient.}

\item{\code{data_source}}{data.frame. All events for this patient, sorted by timestamp.}

\item{\code{event_type_partitions}}{List. Mapping event type to corresponding data.frames.}
}
\if{html}{\out{</div>}}
}
\section{Methods}{
\subsection{Public methods}{
\itemize{
\item \href{#method-Patient-new}{\code{Patient$new()}}
\item \href{#method-Patient-filter_by_time_range_regular}{\code{Patient$filter_by_time_range_regular()}}
\item \href{#method-Patient-filter_by_time_range_fast}{\code{Patient$filter_by_time_range_fast()}}
\item \href{#method-Patient-filter_by_event_type_regular}{\code{Patient$filter_by_event_type_regular()}}
\item \href{#method-Patient-filter_by_event_type_fast}{\code{Patient$filter_by_event_type_fast()}}
\item \href{#method-Patient-get_events}{\code{Patient$get_events()}}
\item \href{#method-Patient-clone}{\code{Patient$clone()}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Patient-new"></a>}}
\if{latex}{\out{\hypertarget{method-Patient-new}{}}}
\subsection{Method \code{new()}}{
Create a Patient object.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Patient$new(patient_id, data_source)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{patient_id}}{Character. Unique patient identifier.}

\item{\code{data_source}}{data.frame. All events (must include event_type, timestamp columns).}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
A \code{Patient} object.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Patient-filter_by_time_range_regular"></a>}}
\if{latex}{\out{\hypertarget{method-Patient-filter_by_time_range_regular}{}}}
\subsection{Method \code{filter_by_time_range_regular()}}{
Filter events by time range (O(n), regular scan).
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Patient$filter_by_time_range_regular(df, start = NULL, end = NULL)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{df}}{data.frame. Source event data.}

\item{\code{start}}{Character/POSIXct. (Optional) Start time.}

\item{\code{end}}{Character/POSIXct. (Optional) End time.}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
data.frame. Events in specified range.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Patient-filter_by_time_range_fast"></a>}}
\if{latex}{\out{\hypertarget{method-Patient-filter_by_time_range_fast}{}}}
\subsection{Method \code{filter_by_time_range_fast()}}{
Efficient time range filter via binary search (O(log n)), requires sorted data.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Patient$filter_by_time_range_fast(df, start = NULL, end = NULL)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{df}}{data.frame. Source event data.}

\item{\code{start}}{Character/POSIXct. (Optional) Start time.}

\item{\code{end}}{Character/POSIXct. (Optional) End time.}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
data.frame. Filtered events.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Patient-filter_by_event_type_regular"></a>}}
\if{latex}{\out{\hypertarget{method-Patient-filter_by_event_type_regular}{}}}
\subsection{Method \code{filter_by_event_type_regular()}}{
Regular event type filter (O(n)).
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Patient$filter_by_event_type_regular(df, event_type)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{df}}{data.frame.}

\item{\code{event_type}}{Character. Type of event.}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
data.frame.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Patient-filter_by_event_type_fast"></a>}}
\if{latex}{\out{\hypertarget{method-Patient-filter_by_event_type_fast}{}}}
\subsection{Method \code{filter_by_event_type_fast()}}{
Fast event type filter (O(1)) using partitioned lookup.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Patient$filter_by_event_type_fast(df, event_type)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{df}}{data.frame.}

\item{\code{event_type}}{Character. Type of event.}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
data.frame. Only the given event type.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Patient-get_events"></a>}}
\if{latex}{\out{\hypertarget{method-Patient-get_events}{}}}
\subsection{Method \code{get_events()}}{
Get events with optional type, time, and custom attribute filters.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Patient$get_events(
  event_type = NULL,
  start = NULL,
  end = NULL,
  filters = NULL,
  return_df = FALSE
)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{event_type}}{Character. (Optional) Filter by event type.}

\item{\code{start}}{Character/POSIXct. (Optional) Start time for filtering events.}

\item{\code{end}}{Character/POSIXct. (Optional) End time for filtering events.}

\item{\code{filters}}{List of lists. (Optional) Each filter: list(attr, op, value) e.g. list(list("dose", ">", 10)).}

\item{\code{return_df}}{Logical. If TRUE, return as data.frame; else as Event object list.}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
data.frame or list of Event objects.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Patient-clone"></a>}}
\if{latex}{\out{\hypertarget{method-Patient-clone}{}}}
\subsection{Method \code{clone()}}{
The objects of this class are cloneable with this method.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{Patient$clone(deep = FALSE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{deep}}{Whether to make a deep clone.}
}
\if{html}{\out{</div>}}
}
}
}
